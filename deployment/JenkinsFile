pipeline{
    agent any

    tools {
    maven 'mvn'
    }

    environment{
        GIT_URL  = 'https://github.com/VictoriaRam08/test.git'
    }

    stages{
        stage('Build'){
            steps{
                git url:"${GIT_URL}"
                script{
                    if(isUnix()){
                        sh "mvn -Dmaven.test.failure.ignore=true clean package"
                    }else{
                        bat "mvn -Dmaven.test.failure.ignore=true clean package"
                    }
                }
            }
        }

        stage('Integration Test'){
            steps{
                script{
                    if(isUnix()){
                        sh "mvn -Dmaven.test.failure.ignore=true clean verify"
                    }else{
                        bat "mvn -Dmaven.test.failure.ignore=true clean verify"
                    }
                }
            }
        }
        stage('Docker Build'){
            steps{
                script{
                    if(isUnix()){
                        sh "docker build -t VictoriaRam08/test ."
                    }else{
                        bat "docker build -t VictoriaRam08/test ."
                    }
                }
            }
        }
    }
}